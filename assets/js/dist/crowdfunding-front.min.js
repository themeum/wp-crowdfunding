jQuery(document).ready(function(e){var n,a,t=0,o=e(".wpneo-block").length;function i(n,a=!1){n=JSON.parse(n);var t='<div class="wpneo-modal-wrapper"> <div class="wpneo-modal-content"> <div class="wpneo-modal-wrapper-head"><span id="wpcf_modal_title">Message</span><a href="javascript:;" class="wpneo-modal-close">&times;</a>';return a&&(t+='</div><span class="wpcf-print-button button wpneo-edit-btn">print</span>'),t+='<div class="wpneo-modal-content-inner"><div id="wpcf_modal_message"></div></div></div></div>',0==e(".wpneo-modal-wrapper").length&&(e("body").append(t),n.redirect&&0==e("#wpneo_crowdfunding_redirect_url").length&&e("body").append('<input type="hidden" id="wpneo_crowdfunding_redirect_url" value="'+n.redirect+'" />')),1==n.success?(n.message&&e(".wpneo-modal-wrapper #wpcf_modal_message").html(n.message),n.title&&e(".wpneo-modal-wrapper #wpcf_modal_title").html(n.title),e(".wpneo-modal-wrapper").css({display:"block"}),e("#wpneofrontenddata").length>0&&e("#wpneofrontenddata")[0].reset(),!0):(e(".wpneo-modal-wrapper #wpcf_modal_message").html(n.message),e(".wpneo-modal-wrapper").css({display:"block"}),!1)}function r(n){e(n).length>1?e(n).show():(e(n).hide(),".removeCampaignRewards"==n&&e(".reward_group").show(),".removecampaignupdate"==n&&e("#campaign_update_field").show()),e(n).first().hide()}function c(){var n,a=e("#wpneo-dashboard-form").serializeArray();return e.ajax({async:!1,url:wpcf_ajax_object.ajax_url,type:"POST",data:a,success:function(e,a,t){i(e),n=e},error:function(e,n,a){i({success:0,message:"Error sending data"})}}),e(".wpneo-content input,.wpneo-content textarea,.wpneo-content select").attr("disabled","disabled").css("border","none"),e(".wpneo-cancel-btn").hide(),e("#wpneo-edit").delay(100).fadeIn("slow"),n}0!=o&&(t=o),e.fn.createNewForm=function(n){return this.each(function(){e(this).find("input,textarea,select").each(function(){var a=e(this);a.attr("name",this.name.replace(/\d/,n)),a.val("")})})},e(".add-new").on("click",function(n){var a=e(".wpneo-block").last().clone();a.createNewForm(t),e("#wpneo-clone .add-new").before(e(a)),t+=1}),e(document).on("click",".remove-button",function(n){e(".wpneo-block").length>1&&e(this).parent(".wpneo-block").remove()}),e("#wpneo_form_start_date, #wpneo_form_end_date, .update-datepicker").datepicker({dateFormat:"dd-mm-yy"}),e(".wpneo_donate_button").on("click",function(n){e(".wpneo_donate_amount_field").val()?e(".wpneo-tooltip-empty").css({visibility:"hidden"}):(n.preventDefault(),e(".wpneo-tooltip-empty").css({visibility:"visible"}))}),e(".crowdfound-pie-chart").easyPieChart({barColor:"#1adc68",trackColor:"#f5f5f5",scaleColor:!1,lineWidth:5}),e(".datepickers_1").datepicker({dateFormat:"yy-mm-dd"}),e(".datepickers_2").datepicker({dateFormat:"yy-mm-dd"}),e("#wpneofrontenddata").submit(function(){tinyMCE.triggerSave();var n=e(this).serialize();return e.ajax({type:"POST",url:wpcf_ajax_object.ajax_url,data:n,success:function(n){JSON.parse(n).success||"undefined"!=typeof grecaptcha&&0!==e(".g-recaptcha").length&&grecaptcha.reset(),i(n)},error:function(e,n,a){i({success:0,message:"Error sending data"})}}),!1}),e(document).on("click",".wpcf-print-button",function(e){window.print()}),window.wpcf_modal=i,n=".wpneo-upload-image-gallery",e("body").on("click",n,function(n){n.preventDefault();var t=e(".gallery-image-ids"),o=e(".gallery-image-id-show");a?a.open():((a=wp.media.frames.file_frame=wp.media({title:e(this).data("uploader_title"),button:{text:e(this).data("uploader_button_text")},multiple:!0})).on("select",function(){var e=[];attachments=a.state().get("selection").toJSON(),t.val(""),o.val(""),attachments.forEach(function(n){e.push(n.id)}),t.val(e),o.val(e)}),a.open())}),function(n){var a=!0,t=wp.media.editor.send.attachment;e("body").on("click",n,function(n){var o="#"+e(this).attr("id"),i=e(o);return a=!0,wp.media.editor.send.attachment=function(n,i){if(!a)return t.apply(o,[n,i]);var r=i.url;e(".wpneo-form-image-url").val(r),e(".wpneo-form-image-id").val(i.id)},wp.media.editor.open(i),!1})}(".wpneo-image-upload"),e(document).on("click",".add_media",function(){_custom_media=!1}),e(".wpneoShowLogin").on("click",function(n){n.preventDefault(),e(".wpneo_login_form_div").slideToggle()}),e("#addreward").on("click",function(n){n.preventDefault();var a=e(".reward_group").html();e("#rewards_addon_fields").append(a).hide().show("slow"),e("#rewards_addon_fields .campaign_rewards_field_copy:last-child").find("input,textarea,select").each(function(){"remove_rewards"!=e(this).attr("name")&&"button"!=e(this).attr("type")&&e(this).val("")}),r(".removeCampaignRewards")}),e("body").on("click",".removeCampaignRewards",function(n){n.preventDefault();const a=e(this).closest("#reward_options").offset().top;e(this).closest(".campaign_rewards_field_copy").html(""),e("html, body").animate({scrollTop:a-100},100),r(".removeCampaignRewards")}),r(".removeCampaignRewards"),e("#addcampaignupdate").on("click",function(n){n.preventDefault();var a=e("#campaign_update_field").html();e("#campaign_update_addon_field").append(a),r(".removecampaignupdate")}),e("body").on("click",".removecampaignupdate",function(n){n.preventDefault(),e(this).closest(".campaign_update_field_copy").html("").hide(),r(".removecampaignupdate")}),r(".removecampaignupdate"),e("#wpneo_active_edit_form").on("click",function(n){n.preventDefault(),e("#wpneo_update_display_wrapper").hide(),e("#wpneo_update_form_wrapper").fadeIn("slow")}),e("#wpneo-edit").on("click",function(n){n.preventDefault(),e("#wpneo-edit").hide(),e(".wpneo-content input,.wpneo-content textarea,.wpneo-content select").not('.wpneo-content input[name="username"]').removeAttr("disabled").css("border","1px solid #dfe1e5"),e(".wpneo-save-btn").delay(100).fadeIn("slow"),e(".wpneo-cancel-btn").delay(100).fadeIn("slow"),e("button.wpneo-image-upload").show()}),e(".wpneo-cancel-btn").on("click",function(n){n.preventDefault(),e(".wpneo-content input,.wpneo-content textarea,.wpneo-content select").attr("disabled","disabled").css("border","none"),e(".wpneo-cancel-btn").hide(),e("#wpneo-dashboard-save").hide(),e("#wpneo-profile-save").hide(),e("#wpneo-contact-save").hide(),e("button.wpneo-image-upload").hide(),e("#wpneo-edit").delay(100).fadeIn("slow")}),e("#wpneo-dashboard-save").on("click",function(n){n.preventDefault();e("#wpneo-dashboard-form").serializeArray();c()}),e("#wpneo-profile-save").on("click",function(e){e.preventDefault(),c()}),e("#wpneo-contact-save").on("click",function(e){e.preventDefault(),c()}),e("#wpneo-password-save").on("click",function(e){e.preventDefault(),c()}),e("#wpneo-update-save").on("click",function(e){e.preventDefault(),i(c())}),e(".wpneo-tabs-menu a").on("click",function(n){n.preventDefault(),e(".wpneo-tabs-menu li").removeClass("wpneo-current"),e(this).parent().addClass("wpneo-current");var a=e(this).attr("href");return e(".wpneo-tab-content").hide(),e(a).fadeIn(),!1}),e(e(".wpneo-current a").attr("href")).fadeIn(),e(".wpneo-fund-modal-btn").on("click",function(n){n.preventDefault();var a=e(this).data("author");e.ajax({type:"POST",url:wpcf_ajax_object.ajax_url,data:{action:"wpcf_bio_action",author:a},success:function(e){i(e)},error:function(e,n,a){i({success:0,message:"Error"})}})}),e(document).on("click",".wpneo-modal-close",function(){e(".wpneo-modal-wrapper").css({display:"none"}),e("#wpneo_crowdfunding_redirect_url").length>0&&(location.href=e("#wpneo_crowdfunding_redirect_url").val())}),e('input[name="wpneo_donate_amount_field"]').on("blur change paste",function(){var n=e(this).val(),a=e(this).data("min-price"),t=e(this).data("max-price");n<a?a&&(e(this).val(a),e(".wpneo-tooltip-min").css({visibility:"visible"})):t<n?t&&(e(this).val(t),e(".wpneo-tooltip-max").css({visibility:"visible"})):e(".wpneo-tooltip-min,.wpneo-tooltip-max").css({visibility:"hidden"})}),e(document).on("click","#love_this_campaign",function(){var n=e(this).data("campaign-id");e.ajax({type:"POST",url:wpcf_ajax_object.ajax_url,data:{action:"love_campaign_action",campaign_id:n},success:function(n){1==(n=JSON.parse(n)).success&&e("#campaign_loved_html").html(n.return_html)},error:function(e,n,a){i({success:0,message:"Error"})}})}),e(document).on("click","#remove_from_love_campaign",function(){var n=e(this).data("campaign-id");e.ajax({type:"POST",url:wpcf_ajax_object.ajax_url,data:{action:"remove_love_campaign_action",campaign_id:n},success:function(n){n=JSON.parse(n),e("#campaign_loved_html").html(n.return_html)},error:function(e,n,a){i({success:0,message:"Error"})}})}),e(document).on("click","#user-registration-btn",function(n){n.preventDefault();var a=e(this).closest("form").serialize();e.ajax({type:"POST",url:wpcf_ajax_object.ajax_url,data:a,success:function(e){i(e),(e=JSON.parse(e)).success?location.href=e.redirect:"undefined"!=typeof grecaptcha&&grecaptcha.reset()},error:function(e,n,a){i({success:0,message:"Error"})}})});var d=e("input[name=wpneo-form-image-url]").val();""!=d&&e("#wpneo-image-show").html('<img width="150" src="'+d+'" />'),e(document).on("click",".media-button-insert",function(n){var a=e("input[name=wpneo-form-image-url]").val();e(".profile-form-img").length>0?e(".profile-form-img").attr("src",a):""!=a&&e("#wpneo-image-show").html('<img width="150" src="'+a+'" />')}),e("body.woocommerce-checkout").length>=1&&e("#billing_email").length<1&&e("#customer_details").css({display:"none"}),e("body").on("click",".wpneo-image-upload-btn",function(n){n.preventDefault();var a=e(this),t=wp.media({title:"Upload Image",multiple:!1}).open().on("select",function(n){var o=t.state().get("selection").first(),i=o.toJSON().url;o=o.toJSON().id,e(a).parent().find(".wpneo_rewards_image_field").val(o),e(a).parent().find(".wpneo_rewards_image_field_url").val(i)})}),e("body").on("click",".wpneo-image-remove",function(n){var a=e(this);e(a).parent().find("wpneo_rewards_image_field_url").val(""),e(a).parent().find(".wpneo_rewards_image_field").val("")}),e("body").on("click",".price-value-change",function(n){n.preventDefault();var a=e(this).data("reward-amount");e("html, body").animate({scrollTop:0},600,function(){setTimeout(function(){e(".wpneo_donate_amount_field").addClass("wpneosplash")},100),setTimeout(function(){e(".wpneo_donate_amount_field").val(a),e(".wpneo_donate_amount_field").removeClass("wpneosplash")},1e3)})}),e(document).on("click","table.reward_table_dashboard tr",function(n){e(this).find(".reward_description").slideToggle()}),e(document).on("click",".wpcf-order-view",function(n){n.preventDefault();var a=e(this).data("orderid");e.ajax({type:"POST",url:wpcf_ajax_object.ajax_url,data:{action:"wpcf_order_action",orderid:a},success:function(e){i(e,!0)},error:function(e,n,a){i({success:0,message:"Error"})}})}),e(document).on("click",".wpneo-icon-embed",function(n){n.preventDefault();var a=e(this).data("postid");e.ajax({type:"POST",url:wpcf_ajax_object.ajax_url,data:{action:"wpcf_embed_action",postid:a},success:function(e){i(e)},error:function(e,n,a){i({success:0,message:"Error"})}})}),e(document).on("click","ul.wpcf_predefined_pledge_amount li a",function(){var n=e(this).attr("data-predefined-price");e(".wpneo_donate_amount_field").val(n)}),e('select[name="wpneo-form-type"]').on("change",function(){"never_end"==e(this).val()?(e("#wpneo_form_start_date").parents(".wpneo-single").hide(),e("#wpneo_form_end_date").parents(".wpneo-single").hide()):(e("#wpneo_form_start_date").parents(".wpneo-single").show(),e("#wpneo_form_end_date").parents(".wpneo-single").show())}),e(".cloud-zoom").magnificPopup({type:"image",mainClass:"product-img-zoomin",gallery:{enabled:!0},zoom:{enabled:!0,duration:400,easing:"ease-in-out",opener:function(e){return e.is("img")?e:e.find("img")}}})});